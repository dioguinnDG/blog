[
  {
    "objectID": "posts/atv1/index.html",
    "href": "posts/atv1/index.html",
    "title": "Atividade Dolar",
    "section": "",
    "text": "Neste post é possível ver o código da cotação do dolar de 05/2010.\n\nimport requests\nimport pandas as pd\nimport plotly.express as px\nimport calendar\nfrom datetime import datetime\n\ndef obter_cotacao_dolar(periodo: str):\n    #1: converter \"MMYYYY\" em datas inicial e final\n    data_inicial = datetime.strptime(periodo, \"%m%Y\")\n    ultimo_dia_mes = calendar.monthrange(data_inicial.year, data_inicial.month)[1]\n    data_final = data_inicial.replace(day=ultimo_dia_mes)\n\n    # Formatar para API\n    inicio_formatado = data_inicial.strftime(\"%m-%d-%Y\")\n    fim_formatado = data_final.strftime(\"%m-%d-%Y\")\n\n    #2: chamada à API PTAX\n    endpoint = (\n        \"https://olinda.bcb.gov.br/olinda/servico/PTAX/versao/v1/odata/\"\n        f\"CotacaoDolarPeriodo(dataInicial=@dataInicial,dataFinalCotacao=@dataFinalCotacao)?\"\n        f\"@dataInicial='{inicio_formatado}'&@dataFinalCotacao='{fim_formatado}'&$top=1000&$format=json\"\n    )\n    resposta_api = requests.get(endpoint)\n    dados = resposta_api.json().get(\"value\", [])\n\n    if not dados:\n        print(\"Não foram encontrados dados para o período informado.\")\n        return\n\n    #3: organizar os dados em DataFrame\n    tabela = pd.DataFrame(dados)\n    tabela[\"dataHoraCotacao\"] = pd.to_datetime(tabela[\"dataHoraCotacao\"])\n    tabela[\"dia\"] = tabela[\"dataHoraCotacao\"].dt.date\n    tabela = tabela.sort_values(\"dia\")\n\n    # Criar série diária completa\n    intervalo_dias = pd.date_range(data_inicial, data_final, freq=\"D\")\n    tabela_completa = pd.DataFrame({\"dia\": intervalo_dias.date})\n    tabela_completa = tabela_completa.merge(tabela[[\"dia\", \"cotacaoCompra\"]], on=\"dia\", how=\"left\")\n\n    # Tratar valores ausentes\n    tabela_completa[\"cotacaoCompra\"] = pd.to_numeric(tabela_completa[\"cotacaoCompra\"], errors=\"coerce\")\n    tabela_completa[\"cotacaoCompra\"].fillna(method=\"ffill\", inplace=True)\n\n    #4: gerar gráfico\n    grafico = px.line(\n        tabela_completa,\n        x=\"dia\",\n        y=\"cotacaoCompra\",\n        title=f\"Cotação do Dólar - {periodo}\",\n        labels={\"dia\": \"Data\", \"cotacaoCompra\": \"Valor (R$)\"}\n    )\n    grafico.show()\n\n# Exemplo de execução\nobter_cotacao_dolar(\"052010\")\n\n/tmp/ipykernel_27490/764415255.py:43: FutureWarning:\n\nA value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.\nThe behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.\n\nFor example, when doing 'df[col].method(value, inplace=True)', try using 'df.method({col: value}, inplace=True)' or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.\n\n\n\n/tmp/ipykernel_27490/764415255.py:43: FutureWarning:\n\nSeries.fillna with 'method' is deprecated and will raise in a future version. Use obj.ffill() or obj.bfill() instead."
  },
  {
    "objectID": "posts/atv2/index.html",
    "href": "posts/atv2/index.html",
    "title": "Atividade Frota",
    "section": "",
    "text": "Neste post é possível ver o código da atividade da frota de ônibus.\n\nimport requests\nimport folium\nimport json\n\n#1: Configurações iniciais\nTOKEN_API = \"02bbec1a5bbe4c45e492ff11a9527973cc66b17670e5048de95b3da0372f8247\"\nlinha_id = \"307\"\n\n#2: Autenticação na API\nconexao = requests.Session()\nendpoint_login = f\"http://api.olhovivo.sptrans.com.br/v2.1/Login/Autenticar?token={TOKEN_API}\"\nresposta_login = conexao.post(endpoint_login)\n\nif resposta_login.status_code == 200 and resposta_login.json() is True:\n    print(\"Autenticação concluída com sucesso!\")\nelse:\n    print(\"Erro na autenticação. Verifique o token informado.\")\n\n#3: Buscar paradas da linha\nendpoint_paradas = f\"http://api.olhovivo.sptrans.com.br/v2.1/ParadaLinha?codigoLinha={linha_id}\"\nparadas_info = conexao.get(endpoint_paradas).json()\nif isinstance(paradas_info, str):\n    paradas_info = json.loads(paradas_info)\nelif isinstance(paradas_info, dict) and \"value\" in paradas_info:\n    paradas_info = paradas_info[\"value\"]\n\n#4: Buscar posição dos ônibus\nendpoint_veiculos = f\"http://api.olhovivo.sptrans.com.br/v2.1/Posicao?codigoLinha={linha_id}\"\nveiculos_info = conexao.get(endpoint_veiculos).json()\nif isinstance(veiculos_info, str):\n    veiculos_info = json.loads(veiculos_info)\nelif isinstance(veiculos_info, dict) and \"value\" in veiculos_info:\n    veiculos_info = veiculos_info[\"value\"]\n\n#5: Buscar trajeto da linha\nendpoint_trajeto = f\"http://api.olhovivo.sptrans.com.br/v2.1/Linha/Trajeto?codigoLinha={linha_id}\"\ntrajeto_info = conexao.get(endpoint_trajeto).json()\nif isinstance(trajeto_info, str):\n    trajeto_info = json.loads(trajeto_info)\nelif isinstance(trajeto_info, dict) and \"value\" in trajeto_info:\n    trajeto_info = trajeto_info[\"value\"]\n\n# Extrair coordenadas do trajeto\nrota_coordenadas = []\nif isinstance(trajeto_info, list):\n    for ponto in trajeto_info:\n        if \"Latitude\" in ponto and \"Longitude\" in ponto:\n            rota_coordenadas.append([ponto[\"Latitude\"], ponto[\"Longitude\"]])\n\n#6: Criar mapa\nmapa_linha = folium.Map(location=[-23.55, -46.63], zoom_start=12)\n\n# Adicionar trajeto (linha verde)\nif rota_coordenadas:\n    folium.PolyLine(rota_coordenadas, color=\"green\", weight=4, opacity=0.6,\n                    tooltip=\"Trajeto da linha\").add_to(mapa_linha)\n\n# Adicionar paradas (azul)\nif isinstance(paradas_info, list):\n    for parada in paradas_info:\n        if \"Latitude\" in parada and \"Longitude\" in parada:\n            folium.Marker(\n                location=[parada[\"Latitude\"], parada[\"Longitude\"]],\n                popup=f\"Parada: {parada.get('Denominacao', 'Sem nome')}\",\n                icon=folium.Icon(color=\"blue\", icon=\"info-sign\")\n            ).add_to(mapa_linha)\n\n# Adicionar ônibus em tempo real (vermelho)\nif isinstance(veiculos_info, dict) and \"vs\" in veiculos_info:\n    for veiculo in veiculos_info[\"vs\"]:\n        folium.Marker(\n            location=[veiculo[\"py\"], veiculo[\"px\"]],\n            popup=f\"Prefixo: {veiculo['p']}\",\n            icon=folium.Icon(color=\"red\", icon=\"bus\", prefix=\"fa\")\n        ).add_to(mapa_linha)\n\n#7: Salvar mapa\nmapa_linha.save(\"mapa_linha_onibus.html\")\nprint(\"Mapa gerado: abra 'mapa_linha_onibus.html' no navegador.\")\n\nErro na autenticação. Verifique o token informado.\nMapa gerado: abra 'mapa_linha_onibus.html' no navegador."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "posts/atv3/index.html",
    "href": "posts/atv3/index.html",
    "title": "Atividade Regressão Linear",
    "section": "",
    "text": "Neste post é possível ver o código da regressão linear.\n\nimport numpy as np\nimport pandas as pd\nimport plotly.express as px\n\n#1: Carregar dados de entrada (anos de estudo e salário)\nvalores_x = np.loadtxt(\"X.txt\")\nvalores_y = np.loadtxt(\"Y.txt\")\n\n# Ajustar formato para vetor coluna\nanos = valores_x.reshape(-1, 1)\nsalarios = valores_y.reshape(-1, 1)\n\n#2: Construir matriz para regressão linear\nmatriz_regressao = np.column_stack((np.ones(len(anos)), anos))\nparametros = np.linalg.inv(matriz_regressao.T @ matriz_regressao) @ (matriz_regressao.T @ salarios)\n\na_intercepto = float(parametros[0])   # intercepto da reta\nb_coeficiente = float(parametros[1])  # inclinação da reta\n\nprint(\"Parâmetros calculados:\")\nprint(f\"Intercepto (a) = {a_intercepto}\")\nprint(f\"Inclinação (b) = {b_coeficiente}\")\n\n#3: Criar DataFrame com pontos e reta ajustada\ndados_plot = pd.DataFrame({\n    \"anos\": valores_x,\n    \"salarios\": valores_y,\n    \"ajuste\": a_intercepto + b_coeficiente * valores_x\n})\n\n#4: Construir gráfico interativo\ngrafico_disp = px.scatter(\n    dados_plot,\n    x=\"anos\",\n    y=\"salarios\",\n    title=\"Correlação entre Anos de Estudo e Salário\",\n    labels={\"anos\": \"Anos de Estudo\", \"salarios\": \"Salário (R$)\"}\n)\n\n# Adicionar linha da regressão\ngrafico_disp.add_traces(\n    px.line(\n        dados_plot,\n        x=\"anos\",\n        y=\"ajuste\"\n    ).data\n)\n\n# Exibição do gráfico\ngrafico_disp.show()\n\nParâmetros calculados:\nIntercepto (a) = 373.93446839132355\nInclinação (b) = 991.6278332981952\n\n\n/tmp/ipykernel_27741/1065547344.py:17: DeprecationWarning:\n\nConversion of an array with ndim &gt; 0 to a scalar is deprecated, and will error in future. Ensure you extract a single element from your array before performing this operation. (Deprecated NumPy 1.25.)\n\n/tmp/ipykernel_27741/1065547344.py:18: DeprecationWarning:\n\nConversion of an array with ndim &gt; 0 to a scalar is deprecated, and will error in future. Ensure you extract a single element from your array before performing this operation. (Deprecated NumPy 1.25.)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "blog",
    "section": "",
    "text": "Atividade Dolar\n\n\n\npython\n\ncódigo\n\ndolar\n\n\n\n\n\n\n\n\n\nNov 24, 2025\n\n\nDiogo\n\n\n\n\n\n\n\n\n\n\n\n\nAtividade Regressão Linear\n\n\n\npython\n\ncódigo\n\nregressão linear\n\n\n\n\n\n\n\n\n\nNov 24, 2025\n\n\nDiogo\n\n\n\n\n\n\n\n\n\n\n\n\nAtividade Frota\n\n\n\npython\n\ncódigo\n\nonibus\n\n\n\n\n\n\n\n\n\nNov 24, 2025\n\n\nDiogo\n\n\n\n\n\nNo matching items"
  }
]